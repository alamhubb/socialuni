const state = {
  friendNoticeList: [
    {
      fromUserID: "2911830477",
      fromNickname: "hihihi",
      fromFaceURL: "ic_avatar_05",
      fromGender: 0,
      toUserID: "3798435312",
      toNickname: "OpenIM-sk",
      toFaceURL:
        "https://storage-online.rentsoft.cn/openim/1655861026796104324-1488665021329751810image_cropper_1655861022512.jpg",
      toGender: 0,
      handleResult: 1,
      reqMsg: "我是hihihi",
      createTime: 1656515436,
      handlerUserID: "3798435312",
      handleMsg: "",
      handleTime: 1656515436,
      ex: "",
      attachedInfo: "",
    },
    {
      fromUserID: "3449034886",
      fromNickname: "111",
      fromFaceURL: "ic_avatar_05",
      fromGender: 0,
      toUserID: "3493949860",
      toNickname: "OpenIM-sk",
      toFaceURL:
        "https://storage-online.rentsoft.cn/openim/1655861026796104324-1488665021329751810image_cropper_1655861022512.jpg",
      toGender: 0,
      handleResult: 1,
      reqMsg: "",
      createTime: 1656515423,
      handlerUserID: "3493949860",
      handleMsg: "",
      handleTime: 1656515423,
      ex: "",
      attachedInfo: "",
    },
    {
      fromUserID: "870517699",
      fromNickname: "小红",
      fromFaceURL:
        "https://storage-online.rentsoft.cn/openim/1655532712536247948-8273290538659802269image_cropper_1655532711426.jpg",
      fromGender: 0,
      toUserID: "3493949860",
      toNickname: "OpenIM-sk",
      toFaceURL:
        "https://storage-online.rentsoft.cn/openim/1655861026796104324-1488665021329751810image_cropper_1655861022512.jpg",
      toGender: 0,
      handleResult: 1,
      reqMsg: "",
      createTime: 1656463402,
      handlerUserID: "3493949860",
      handleMsg: "",
      handleTime: 1656463402,
      ex: "",
      attachedInfo: "",
    },
    {
      fromUserID: "2827671465",
      fromNickname: "传琪李",
      fromFaceURL: "ic_avatar_05",
      fromGender: 0,
      toUserID: "3493949860",
      toNickname: "OpenIM-sk",
      toFaceURL:
        "https://storage-online.rentsoft.cn/openim/1655861026796104324-1488665021329751810image_cropper_1655861022512.jpg",
      toGender: 0,
      handleResult: 1,
      reqMsg: "群主你好",
      createTime: 1656463399,
      handlerUserID: "3493949860",
      handleMsg: "",
      handleTime: 1656463399,
      ex: "",
      attachedInfo: "",
    },
    {
      fromUserID: "2165082675",
      fromNickname: "测试大咖",
      fromFaceURL: "ic_avatar_03",
      fromGender: 0,
      toUserID: "3493949860",
      toNickname: "OpenIM-sk",
      toFaceURL:
        "https://storage-online.rentsoft.cn/openim/1655861026796104324-1488665021329751810image_cropper_1655861022512.jpg",
      toGender: 0,
      handleResult: 1,
      reqMsg: "",
      createTime: 1656161687,
      handlerUserID: "3493949860",
      handleMsg: "",
      handleTime: 1656161687,
      ex: "",
      attachedInfo: "",
    },
    {
      fromUserID: "3592837506",
      fromNickname: "小雨2",
      fromFaceURL: "ic_avatar_05",
      fromGender: 0,
      toUserID: "3493949860",
      toNickname: "OpenIM-sk",
      toFaceURL:
        "https://storage-online.rentsoft.cn/openim/1655861026796104324-1488665021329751810image_cropper_1655861022512.jpg",
      toGender: 0,
      handleResult: 1,
      reqMsg: "你好 请问音视频的实现需要单独的源码么",
      createTime: 1655970038,
      handlerUserID: "3493949860",
      handleMsg: "",
      handleTime: 1655970038,
      ex: "",
      attachedInfo: "",
    },
    {
      fromUserID: "207325065",
      fromNickname: "steve45658",
      fromFaceURL:
        "https://storage-online.rentsoft.cn/openim/1656372649514364883-2585213625146557091image_cropper_1656372643220.jpg",
      fromGender: 2,
      toUserID: "3493949860",
      toNickname: "OpenIM-sk",
      toFaceURL:
        "https://storage-online.rentsoft.cn/openim/1655861026796104324-1488665021329751810image_cropper_1655861022512.jpg",
      toGender: 0,
      handleResult: 1,
      reqMsg: "hi",
      createTime: 1655957732,
      handlerUserID: "3493949860",
      handleMsg: "",
      handleTime: 1655957732,
      ex: "",
      attachedInfo: "",
    },
    {
      fromUserID: "2276370415",
      fromNickname: "junhs",
      fromFaceURL:
        "https://storage-online.rentsoft.cn/openim/1655738842064630103-2857523257338926491image_cropper_1655738803083.jpg",
      fromGender: 1,
      toUserID: "3493949860",
      toNickname: "OpenIM-sk",
      toFaceURL:
        "https://storage-online.rentsoft.cn/openim/1655861026796104324-1488665021329751810image_cropper_1655861022512.jpg",
      toGender: 0,
      handleResult: 1,
      reqMsg: "",
      createTime: 1655739273,
      handlerUserID: "3493949860",
      handleMsg: "",
      handleTime: 1655739273,
      ex: "",
      attachedInfo: "",
    },
    {
      fromUserID: "2129814657",
      fromNickname: "大家好",
      fromFaceURL: "ic_avatar_04",
      fromGender: 0,
      toUserID: "3493949860",
      toNickname: "OpenIM-sk",
      toFaceURL:
        "https://storage-online.rentsoft.cn/openim/1655861026796104324-1488665021329751810image_cropper_1655861022512.jpg",
      toGender: 0,
      handleResult: 1,
      reqMsg: "您好",
      createTime: 1655474383,
      handlerUserID: "3493949860",
      handleMsg: "",
      handleTime: 1655474383,
      ex: "",
      attachedInfo: "",
    },
    {
      fromUserID: "4186202536",
      fromNickname: "wei",
      fromFaceURL: "ic_avatar_04",
      fromGender: 0,
      toUserID: "3493949860",
      toNickname: "OpenIM-sk",
      toFaceURL:
        "https://storage-online.rentsoft.cn/openim/1655861026796104324-1488665021329751810image_cropper_1655861022512.jpg",
      toGender: 0,
      handleResult: 1,
      reqMsg: "你好",
      createTime: 1655474233,
      handlerUserID: "3493949860",
      handleMsg: "",
      handleTime: 1655474233,
      ex: "",
      attachedInfo: "",
    },
  ],
  selfFriendNoticeList: [
    {
      fromUserID: "3493949860",
      fromNickname: "OpenIM-sk",
      fromFaceURL:
        "https://storage-online.rentsoft.cn/openim/1655861026796104324-1488665021329751810image_cropper_1655861022512.jpg",
      fromGender: 0,
      toUserID: "2165082675",
      toNickname: "测试大咖",
      toFaceURL: "ic_avatar_03",
      toGender: 0,
      handleResult: 1,
      reqMsg: "",
      createTime: 1656162360,
      handlerUserID: "2165082675",
      handleMsg: "",
      handleTime: 1656162360,
      ex: "",
      attachedInfo: "",
    },
    {
      fromUserID: "3493949860",
      fromNickname: "OpenIM-sk",
      fromFaceURL:
        "https://storage-online.rentsoft.cn/openim/1655861026796104324-1488665021329751810image_cropper_1655861022512.jpg",
      fromGender: 0,
      toUserID: "1095851311",
      toNickname: "999999",
      toFaceURL: "ic_avatar_02",
      toGender: 0,
      handleResult: 1,
      reqMsg: "",
      createTime: 1656087137,
      handlerUserID: "1095851311",
      handleMsg: "",
      handleTime: 1656087137,
      ex: "",
      attachedInfo: "",
    },
    {
      fromUserID: "3493949860",
      fromNickname: "OpenIM-sk",
      fromFaceURL:
        "https://storage-online.rentsoft.cn/openim/1655861026796104324-1488665021329751810image_cropper_1655861022512.jpg",
      fromGender: 0,
      toUserID: "1858161186",
      toNickname: "冉春",
      toFaceURL: "ic_avatar_01",
      toGender: 0,
      handleResult: 1,
      reqMsg: "",
      createTime: 1655945270,
      handlerUserID: "1858161186",
      handleMsg: "",
      handleTime: 1655945270,
      ex: "",
      attachedInfo: "",
    },
    {
      fromUserID: "3493949860",
      fromNickname: "OpenIM-sk",
      fromFaceURL:
        "https://storage-online.rentsoft.cn/openim/1655861026796104324-1488665021329751810image_cropper_1655861022512.jpg",
      fromGender: 0,
      toUserID: "1757557069",
      toNickname: "秋天",
      toFaceURL: "ic_avatar_06",
      toGender: 0,
      handleResult: 1,
      reqMsg: "",
      createTime: 1655945044,
      handlerUserID: "1757557069",
      handleMsg: "",
      handleTime: 1655945044,
      ex: "",
      attachedInfo: "",
    },
    {
      fromUserID: "3493949860",
      fromNickname: "OpenIM-sk",
      fromFaceURL:
        "https://storage-online.rentsoft.cn/openim/1655861026796104324-1488665021329751810image_cropper_1655861022512.jpg",
      fromGender: 0,
      toUserID: "1012605792",
      toNickname: "江陵",
      toFaceURL: "ic_avatar_06",
      toGender: 1,
      handleResult: 1,
      reqMsg: "",
      createTime: 1655759929,
      handlerUserID: "1012605792",
      handleMsg: "",
      handleTime: 1655759929,
      ex: "",
      attachedInfo: "",
    },
    {
      fromUserID: "3493949860",
      fromNickname: "OpenIM-sk",
      fromFaceURL:
        "https://storage-online.rentsoft.cn/openim/1655861026796104324-1488665021329751810image_cropper_1655861022512.jpg",
      fromGender: 0,
      toUserID: "2721304452",
      toNickname: "周",
      toFaceURL: "ic_avatar_06",
      toGender: 0,
      handleResult: 0,
      reqMsg: "",
      createTime: 1655567415,
      handlerUserID: "",
      handleMsg: "",
      handleTime: 0,
      ex: "",
      attachedInfo: "",
    },
  ],
  friendNoticeItem: null,
  groupNoticeList: [
    {
      groupID: "4039827985",
      groupName: "栓Q",
      notification: "",
      introduction: "",
      groupFaceURL:
        "https://storage-online.rentsoft.cn/openim/1658216673228801991-2610529275472644968image_cropper_1658216666068.jpg",
      createTime: 1658216675,
      status: 0,
      creatorUserID: "3087749056",
      groupType: 0,
      ownerUserID: "3087749056",
      memberCount: 2,
      userID: "2063942761",
      nickname: "小红花",
      userFaceURL:
        "https://storage-online.rentsoft.cn/openim/1658216376611080014-7955079406183515637.jpg",
      gender: 0,
      handleResult: 0,
      reqMsg: "",
      handledMsg: "",
      reqTime: 1658321072,
      handleUserID: "",
      handledTime: 0,
      ex: "",
      attachedInfo: "",
    },
    {
      groupID: "4039827985",
      groupName: "栓Q",
      notification: "",
      introduction: "",
      groupFaceURL:
        "https://storage-online.rentsoft.cn/openim/1658216673228801991-2610529275472644968image_cropper_1658216666068.jpg",
      createTime: 1658216675,
      status: 0,
      creatorUserID: "3087749056",
      groupType: 0,
      ownerUserID: "3087749056",
      memberCount: 2,
      userID: "578660011",
      nickname: "小红帽",
      userFaceURL:
        "https://storage-online.rentsoft.cn/openim/1658218072491547984-8695401978176517617.jpg",
      gender: 0,
      handleResult: -1,
      reqMsg: "我是小红帽",
      handledMsg: "",
      reqTime: 1658218164,
      handleUserID: "3087749056",
      handledTime: 0,
      ex: "",
      attachedInfo: "",
    },
    {
      groupID: "1248868322",
      groupName: "哈哈",
      notification: "",
      introduction: "",
      groupFaceURL:
        "https://storage-online.rentsoft.cn/openim/1658218351010163145-3407101214571374881image_cropper_1658218350142.jpg",
      createTime: 1658218352,
      status: 0,
      creatorUserID: "3087749056",
      groupType: 0,
      ownerUserID: "3087749056",
      memberCount: 2,
      userID: "2063942761",
      nickname: "小红花",
      userFaceURL:
        "https://storage-online.rentsoft.cn/openim/1658216376611080014-7955079406183515637.jpg",
      gender: 0,
      handleResult: 1,
      reqMsg: "我是小红花",
      handledMsg: "",
      reqTime: 1658218452,
      handleUserID: "3087749056",
      handledTime: 0,
      ex: "",
      attachedInfo: "",
    },
    {
      groupID: "1248868322",
      groupName: "哈哈",
      notification: "",
      introduction: "",
      groupFaceURL:
        "https://storage-online.rentsoft.cn/openim/1658218351010163145-3407101214571374881image_cropper_1658218350142.jpg",
      createTime: 1658218352,
      status: 0,
      creatorUserID: "3087749056",
      groupType: 0,
      ownerUserID: "3087749056",
      memberCount: 2,
      userID: "578660011",
      nickname: "小红帽",
      userFaceURL:
        "https://storage-online.rentsoft.cn/openim/1658218072491547984-8695401978176517617.jpg",
      gender: 0,
      handleResult: -1,
      reqMsg: "我是小红帽",
      handledMsg: "",
      reqTime: 1658218371,
      handleUserID: "3087749056",
      handledTime: 0,
      ex: "",
      attachedInfo: "",
    },
    {
      groupID: "4200180770",
      groupName: "不住道",
      notification: "",
      introduction: "",
      groupFaceURL:
        "https://storage-online.rentsoft.cn/openim/1658320973584730053-4452428813400194097.jpg",
      createTime: 1658320978,
      status: 0,
      creatorUserID: "3087749056",
      groupType: 0,
      ownerUserID: "3087749056",
      memberCount: 2,
      userID: "2063942761",
      nickname: "小红花",
      userFaceURL:
        "https://storage-online.rentsoft.cn/openim/1658216376611080014-7955079406183515637.jpg",
      gender: 0,
      handleResult: 0,
      reqMsg: "",
      handledMsg: "",
      reqTime: 1658321032,
      handleUserID: "",
      handledTime: 0,
      ex: "",
      attachedInfo: "",
    },
    {
      groupID: "4160919831",
      groupName: "只能收到四个",
      notification: "",
      introduction: "",
      groupFaceURL:
        "https://storage-online.rentsoft.cn/openim/1658321104929533158-2970700287221458280.jpg",
      createTime: 1658321109,
      status: 0,
      creatorUserID: "3087749056",
      groupType: 0,
      ownerUserID: "3087749056",
      memberCount: 2,
      userID: "2063942761",
      nickname: "小红花",
      userFaceURL:
        "https://storage-online.rentsoft.cn/openim/1658216376611080014-7955079406183515637.jpg",
      gender: 0,
      handleResult: 0,
      reqMsg: "",
      handledMsg: "",
      reqTime: 1658321123,
      handleUserID: "",
      handledTime: 0,
      ex: "",
      attachedInfo: "",
    },
  ],
  selfGroupNoticeList: [
    {
      groupID: "1585766761",
      groupName: "真的假的",
      notification: "",
      introduction: "",
      groupFaceURL:
        "https://storage-online.rentsoft.cn/openim/1658216748202162249-6555455521637047278.jpg",
      createTime: 0,
      status: 2,
      creatorUserID: "2063942761",
      groupType: 0,
      ownerUserID: "",
      memberCount: 0,
      userID: "3087749056",
      nickname: "小红丫丫",
      userFaceURL:
        "https://storage-online.rentsoft.cn/openim/1658319345598115198-8717882922351946713.jpg",
      gender: 0,
      handleResult: 1,
      reqMsg: "",
      handledMsg: "",
      reqTime: 1658217884,
      handleUserID: "2063942761",
      handledTime: 0,
      ex: "",
      attachedInfo: "",
    },
    {
      groupID: "3144406613",
      groupName: "445",
      notification: "",
      introduction: "",
      groupFaceURL: "",
      createTime: 1657526202,
      status: 0,
      creatorUserID: "2911830477",
      groupType: 0,
      ownerUserID: "2911830477",
      memberCount: 1,
      userID: "3087749056",
      nickname: "小红丫丫",
      userFaceURL:
        "https://storage-online.rentsoft.cn/openim/1658319345598115198-8717882922351946713.jpg",
      gender: 0,
      handleResult: 0,
      reqMsg: "我是小红测试",
      handledMsg: "",
      reqTime: 1658217778,
      handleUserID: "",
      handledTime: 0,
      ex: "",
      attachedInfo: "",
    },
    {
      groupID: "3243128769",
      groupName: "不不不",
      notification: "",
      introduction: "",
      groupFaceURL:
        "https://storage-online.rentsoft.cn/openim/1658218305473521386-7267104140862379789.jpg",
      createTime: 1658218309,
      status: 0,
      creatorUserID: "578660011",
      groupType: 0,
      ownerUserID: "578660011",
      memberCount: 2,
      userID: "3087749056",
      nickname: "小红丫丫",
      userFaceURL:
        "https://storage-online.rentsoft.cn/openim/1658319345598115198-8717882922351946713.jpg",
      gender: 0,
      handleResult: 1,
      reqMsg: "",
      handledMsg: "",
      reqTime: 1658218333,
      handleUserID: "578660011",
      handledTime: 0,
      ex: "",
      attachedInfo: "",
    },
    {
      groupID: "1304810619",
      groupName: "测试一下",
      notification: "",
      introduction: "",
      groupFaceURL:
        "https://storage-online.rentsoft.cn/openim/1658319763094824676-8456667422123641445image_cropper_1658319761239.jpg",
      createTime: 1658319764,
      status: 0,
      creatorUserID: "2063942761",
      groupType: 0,
      ownerUserID: "2063942761",
      memberCount: 3,
      userID: "3087749056",
      nickname: "小红丫丫",
      userFaceURL:
        "https://storage-online.rentsoft.cn/openim/1658319345598115198-8717882922351946713.jpg",
      gender: 0,
      handleResult: 1,
      reqMsg: "我是小红丫丫",
      handledMsg: "",
      reqTime: 1658320874,
      handleUserID: "2063942761",
      handledTime: 0,
      ex: "",
      attachedInfo: "",
    },
  ],
  groupNoticeItem: null,
  joinedGroupDeletedTimes: 0,
};
const mutations = {
  set_friendNoticeList(state, list) {
    // console.log("friendNoticeList", list);
    state.friendNoticeList = list;
  },
  set_selfFriendNoticeList(state, list) {
    // console.log("selfFriendNoticeList", list);
    state.selfFriendNoticeList = list;
  },
  set_groupNoticeList(state, list) {
    // console.log("groupNoticeList", list);
    state.groupNoticeList = list;
  },
  set_selfGroupNoticeList(state, list) {
    // console.log("selfGroupNoticeList", list);
    state.selfGroupNoticeList = list;
  },
  set_friendNoticeItem(state, item = null) {
    state.friendNoticeItem = item;
  },
  set_groupNoticeItem(state, item = null) {
    state.groupNoticeItem = item;
  },
  set_joinedGroupDeletedTimes(state) {
    state.joinedGroupDeletedTimes++;
  },
  set_tabBarBadge(state) {
    const friendNoticeListNum =
      state.friendNoticeList.filter((i) => i.handleResult === 0).length || 0;
    const groupNoticeListNum =
      state.groupNoticeList.filter((i) => i.handleResult === 0).length || 0;
    let total = friendNoticeListNum + groupNoticeListNum;
    if (total > 0) {
      total = total > 99 ? 99 : total;
      uni.setTabBarBadge({
        index: 1,
        text: total + "",
      });
    } else {
      uni.removeTabBarBadge({ index: 1 });
    }
  },
};
const actions = {
  get_friendNoticeList({ commit, rootGetters }, im) {
    im.getRecvFriendApplicationList(rootGetters.operationID, (res) => {
      if (res.errCode === 0) {
        // console.log("set_friendNoticeList", JSON.parse(res.data));
        // 0待处理  1同意 -1拒绝
        const data = JSON.parse(res.data);
        const list = data.sort((a, b) => b.createTime - a.createTime);
        commit("set_friendNoticeList", list);
        commit("set_tabBarBadge");
      }
    });
  },
  get_selfFriendNoticeList({ commit, rootGetters }, im) {
    im.getSendFriendApplicationList(rootGetters.operationID, (res) => {
      if (res.errCode === 0) {
        // console.log("set_selfFriendNoticeList", JSON.parse(res.data));
        const data = JSON.parse(res.data);
        const list = data.sort((a, b) => b.createTime - a.createTime);
        commit("set_selfFriendNoticeList", list);
      }
    });
  },
  get_groupNoticeList({ commit, rootGetters }, im) {
    im.getRecvGroupApplicationList(rootGetters.operationID, (res) => {
      if (res.errCode === 0) {
        // console.log("set_groupNoticeList", JSON.parse(res.data));
        const data = JSON.parse(res.data);
        const list = data.sort((a, b) => b.createTime - a.createTime);
        commit("set_groupNoticeList", list);
        commit("set_tabBarBadge");
      }
    });
  },
  get_selfGroupNoticeList({ commit, rootGetters }, im) {
    im.getSendGroupApplicationList(rootGetters.operationID, (res) => {
      if (res.errCode === 0) {
        // console.log("set_selfGroupNoticeList", JSON.parse(res.data));
        const data = JSON.parse(res.data);
        const list = data.sort((a, b) => b.createTime - a.createTime);
        commit("set_selfGroupNoticeList", list);
      }
    });
  },
};
export default {
  namespaced: true,
  state,
  mutations,
  actions,
};
