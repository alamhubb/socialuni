

id 不一致问题。

有union就用unionid，没有就用id

用户创建，一个系统创建，不需要校验

特殊情况，本系统登录了，但是没有三方系统的token


本系统存在，但是没有三方系统的 userId。

1. 为什么需要关联呢，因为这样的话，三方系统一动。 全动了

2. 如果设置关联就不存在这个问题。

为什么要关联呢，是因为想要一个全局统一的id。


本系统中的 三方表。 存储userId 用本系统的 unionId关联。

但是返回给前端的 userId是 unionId


那样的话，就是判断


只需要保证，本系统的unionId和三方系统的unionId 类型一致就行。


比如用户 关注了一个 b系统的用户，


根据 id 找 user。找不到，也不报错。

记录这条记录就行了。


如果关联，解决，用户已注册，但是没在三方注册问题。 这样用户的id 和  三方的id就绑定不上了。


因为本系统中已有的数据，都是用的旧的 id数据。


还有就是 你自己的系统定义你的user的
然后把uid，推给三方系统，三方系统使用你提供的uid。
但是这样的话，又没有办法保证 id一致了。各个系统的。



首先呢user关联表的userId必须是long，unionId类型

这样的话呢，你的关注数据什么的可以保存

比如查询展示时，查不到这个user，从 关联表里，就不显示就行了。


然后还有一个就是三方里面，这个用户的id变了。

理论上这个id，应该是可以随意修改的。

既然是可以随意修改， 关联表里面存的，就不应该是 unionId。

能想到的就是有数据的存 unionId，
没数据的存uuid

关联表列混装。

返回的是uuid，有个关联的unionid。

根据uuid，查询unionId, 数据表里记的都是unionid。



这样存的呢都是unionid, 本系统没有的则存的是uuid。

最好的办法就是混装了。

那就是关注的时候，随便写了， 主要交给外部系统判断了。


如果当前系统为中心，则入参id不能为空。

如果当前系统有中心，则当前入参可以为空，交给中心判断。

本系统中的所有用户都会在外部系统中注册，用外部系统的用户id作为本系统的用户id，但是外部系统的用户id又会经常变化，
如果本系统同步变化用户id，就会导致之前用户之前的数据和用户id关联不上，所以我就想建一个关联变，将本系统用户id和外部系统用户id关联，
这样又可以使用外部系统用户id作为用户id给前端展示，通过关联，又可以做到外部系统用户id变化后，本系统跟随变化，同时还能关联上之前的数据，
但又有一个问题，本系统会记录本系统和外部系统的交互，比如本系统的用户关注了外部系统的用户，此时记录表里又不能记录关联表的用户id了，
因为外部系统的用户在本系统的关联表中是不存在的，这时候应该怎么办呢

